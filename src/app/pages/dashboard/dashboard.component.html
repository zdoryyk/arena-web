<main id="main" class="main">
  <section class="section">
    <div class="container">
      <h2 class="title">Current Problemsets</h2>
      <div class="submissions">
        @if (isLoading) {
          <div class="skeleton"><p-skeleton width="100%" height="100%" ></p-skeleton></div>
        }
        @if (problemsets && !isLoading) {
          @for (problemset of problemsets; track $index) {
              @if (problemset.isActive) {
                  <app-submission-card 
                  [id]="problemset.id"
                  [title]="problemset.title"
                  [totalSubmissions]="problemset.submissionsLength"
                  [lastEvaluation]="problemset.lastSubmissionScore"
                  [lastSubmitDate]="problemset.lastSubmissionDate"
                  [maxProblemsetScore]="problemset.maxSubmissionScore"
                  [completeStatus]="problemset.completeStatus"
                  [isActive]="true"
                  >
                  </app-submission-card>
              }   
          }
        }
      </div>
      <div class="summary">
        <div class="history">
          <h2 class="title">Last Submissions</h2>
          @if(!latestSubmissions){
            <p class="empty">You donâ€™t have yet</p>
          }@else {
            @for (detail of latestSubmissions.submissionDetails; track $index) {
               <div class="sub-row">
                <div class="index">{{$index + 1}}</div>
                <div class="row-title">{{latestSubmissions.problemsetTitle}}</div>
                <div class="row-evaluation">{{detail.score.toFixed(1)}}/{{latestSubmissions.maxScore}}  </div>
               </div>          
            }
          }
        </div>
        <div class="dashboard-chart">
          <p-chart
            class="line-chart"
            type="line"
            [data]="lineData"
            [options]="lineOptions"
            width="100%"
            height="100%"
          ></p-chart>
        </div>
      </div>
    </div>
  </section>
</main>
